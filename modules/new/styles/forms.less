@import 'mediawiki.mixins';
@import 'settings/colors.less';
@import 'mixins/helpers.less';

.client-nojs {
	.flow-reply-form,
	.flow-newtopic-form {
		// Hide cancel button in no-JavaScript mode.
		.flow-ui-destructive {
			display: none;
		}
	}
}

// Avoid flash of unstyled content
.client-js {
	.flow-anon-warning {
		display: none;
	}
}

// Placeholder text styling helper
.field-placeholder-styling() {
	font-style: italic;
	font-weight: normal;
}

.flow-board {
	// Make all text fields 100% wide by default
	.mw-ui-fieldtype-text,
	.mw-ui-fieldtag-textarea {
		.box-sizing(border-box);
		width: 100%;
	}

	.mw-ui-input,
	textarea {
		.box-sizing(border-box);
		width: 100%;
		padding: .3em .3em .3em .6em;
		display: block;
		color: inherit;
		font-family: inherit;
		font-size: inherit;
		line-height: inherit;
		// Transition for box-shadow @winter
		.transition(~"border linear .2s, box-shadow linear .2s");

		// Placeholder text styling must be set individually for each browser @winter
		&::-webkit-input-placeholder { // webkit
			.field-placeholder-styling;
		}
		&::-moz-placeholder { // FF 4-18
			.field-placeholder-styling;
		}
		&:-moz-placeholder { // FF >= 19
			.field-placeholder-styling;
		}
		&:-ms-input-placeholder { // IE >= 10
			.field-placeholder-styling;
		}
	}

	textarea {
		min-height: 8em;
	}

	// Add blue box-shadow on focus @winter
	.mw-ui-input:focus,
	textarea:focus {
		box-shadow: inset .45em 0 0 #5088f7;
		-moz-box-shadow: inset .45em 0 0 #5088f7;
		-webkit-box-shadow: inset .45em 0 0 #5088f7;
	}

	.flow-anon-warning {
		margin-bottom: 0.75em;
		a {
			// FIXME: Due to the lack of a fix for bug 66746 this link is treated as an external link.
			// Yes Shahyar !important is bad
			// but the alternative css hacks that would be needed here are even more horrible.
			color: #fff !important;
			font-weight: bold;
		}
	}
}

.flow-newtopic-form {
	// Attach these two inputs together to make them seem like one congruous input
	input.mw-ui-input,
	textarea.mw-ui-input {
		margin-top: 0;
		margin-bottom: 0;
	}
	textarea.mw-ui-input {
		padding-left: 1.5em;
		border-top-width: 0;
	}
	// Make the new topic input mimic new topic text
	input.mw-ui-input {
		padding-left: .75em;
		font-size: 1.75em;
		font-weight: bold;
		line-height: 1.25em;
	}
}

// Form button actions should be right-affixed
.flow-form-actions {
	position: relative;
	margin-top: .25em;

	button.flow-ui-button, a.flow-ui-button {
		float: right;
		margin-left: .25em;
	}
}

// TOU should be tiny and grey, within flow-form-actions
.flow-terms-of-use {
	display: table-cell;
	height: 3.6em;
	vertical-align: middle;
	color: @colorTextLight;
	font-size: .65em;
	line-height: 1em;
}

// MEDIA QUERIES
@media (max-width: 600px) and (min-device-width: 700px), (max-device-width: 700px) {
	.flow-form-actions {
		font-size: 0.75em;

		.flow-ui-button {
			.box-sizing(border-box);
			margin-left: 0;
			width: 100%;
			float: none;
		}

		.flow-terms-of-use {
			display: block;
			height: auto;
			font-size: 7px;
			text-align: center;
		}
	}
}

// Preview
.flow-content-preview {
	word-wrap: break-word;
	word-break: break-word;

	background-color: #FDFFE7;
	border: 1px solid #FCEB92;
	padding: 5px;
	margin-top: 5px;
	margin-bottom: 15px;
	white-space: normal;
	overflow: auto;

	display: none; // Hide initially

	.flow-preview-sub-container {
		margin-top: 5px;
	}
}
