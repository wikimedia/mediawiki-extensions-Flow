@import 'mediawiki.mixins';
@import 'mediawiki.ui/variables';
@import 'flow.variables';

// TODO most of this should move to VisualEditorWidget.less once the old editor system
// has been removed
.flow-component {
	.ve-init-target {
		border: 1px solid #CCC;

		&.flow-ui-focused {
			border-color: @colorProgressive;
			box-shadow: inset 0 0 0 2px @colorProgressive;
		}
	}

	.ve-ce-documentNode,
	.ve-ui-surface-placeholder {
		padding: 1px 8px;
	}

	.ve-ce-documentNode {
		min-height: @editorMinHeight;
		box-sizing: border-box;
	}

	.ve-ui-surface {
		// This creates a space for the toolbar, a matching negative margin-top
		// shifts the toolbar into this location.
		// @todo where did this 40 come from, could it be calculated?
		padding-bottom: @editorToolbarHeight;
	}

	.ve-ui-debugBar {
		/* Move above bottom toolbar */
		margin: -@editorToolbarHeight 0 @editorToolbarHeight;
		padding: 4px 8px;
		/* Make sure the surface doesn't overlay */
		position: relative;
	}

	.ve-ui-surface-placeholder {
		font-style: italic;
	}

	.oo-ui-toolbar {
		// The -@editorToolbarHeight matches the padding-bottom on .ve-ce-documentNode to put the toolbar inside
		// the editing area. The 2px of positive margin gives room for the blue border of the
		// documentNode (via .mw-ui-input)
		margin: (-@editorToolbarHeight - 2px) 2px 2px 2px;

		// Undo .mw-body-content font-size (0.875em) and apply font-size matching OOUI theme (0.8em)
		// TODO: Make this theme specific
		font-size: 0.8/0.875em;

		// But don't let these rules double-apply for nested toolbars
		.oo-ui-toolbar {
			margin: 0;
			font-size: 1em;
		}
	}

	.oo-ui-toolbar-bar {
		// The default border is only appropriate in the default ve, with
		// the toolbar above the editing surface.
		border: none;
		box-shadow: none;
		// When we apply a pending texture to the editor, we don't want the toolbar to display
		// in solid white on top of that.
		background: transparent;
	}

	.oo-ui-toolGroup {
		border: none;
	}
}
