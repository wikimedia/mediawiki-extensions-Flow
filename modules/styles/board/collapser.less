@import 'mediawiki.mixins';
@import 'flow.colors';
@import 'flow.helpers';
@import 'flow.variables';

// Collapser states
// Hide the other two collapser buttons initially; these are toggled by a single click
.flow-board-navigation {
	a.flow-board-collapser-compact,
	a.flow-board-collapser-topics {
		display: none;
	}
}

// Overrides to the default expand/collapse state.  Only set when
// necessary and removed when the page-level state changes
// div is used to add specificity.
div.flow-element-expanded {
	// topic hidden
	.flow-post,
	.flow-reply-form {
		display: block;
	}

	// post hidden
	.flow-post & .flow-moderated-post-content {
		display: none;
	}
}

.flow-board:not(.flow-disable-topic-collapse) {
	div.flow-element-collapsed {
		// topic hidden
		.flow-post,
		.flow-reply-form {
			display: none;
		}
	}
}

.flow-post {
	// post hidden
	div.flow-element-collapsed {
		.flow-post-content,
		.flow-post-meta {
			display: none;
		}
	}
}

// In compact mode, posts are hidden by default, and the topic titlebar is minimized
.flow-board-collapsed-compact {
	.flow-board-navigation {
		a.flow-board-collapser-compact {
			display: inline-block;
		}
		a.flow-board-collapser-full {
			display: none;
		}
	}

	.flow-topic {
		padding-bottom: 0;

		h2.flow-topic-title,
		.flow-moderated-topic-title {
			margin-bottom: 0 !important; // Needs additional specificity to override `div#content h2`
		}

		.flow-topic-titlebar {
			padding: .5em @topicIndent;

			.flow-topic-meta {
				display: none;
			}
		}

		.flow-reply-count {
			display: block;
		}
	}

	.flow-topic-expanded {
		.flow-topic-title {
			overflow: visible;
			white-space: normal;
		}
	}

	.flow-topic-summary,
	.flow-post,
	.flow-reply-form {
		display: none;

		&.flow-preview {
			display: block;
		}
	}
}
// In topics mode, posts are hidden by default; only the topic titlebar is visible
.flow-board-collapsed-topics {
	.flow-board-navigation {
		a.flow-board-collapser-topics {
			display: inline-block;
		}
		a.flow-board-collapser-full {
			display: none;
		}
	}

	.flow-post,
	.flow-reply-form {
		display: none;
	}
}
