{
  "comments": [
    {
      "key": {
        "uuid": "8e28a382_6de78ea8",
        "filename": "includes/Data/WatchTopicListener.php",
        "patchSetId": 7
      },
      "lineNbr": 58,
      "author": {
        "id": 776
      },
      "writtenOn": "2014-08-14T22:06:17Z",
      "side": 1,
      "message": "i feel like this should be in the job as well, the inserts are possibly heavy but querying watchlist might also contribute to that slowness",
      "revId": "70841c737966514c4b7131f8da0c8c7d90b5f82c",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8e28a382_261763f5",
        "filename": "includes/Data/WatchTopicListener.php",
        "patchSetId": 7
      },
      "lineNbr": 58,
      "author": {
        "id": 214
      },
      "writtenOn": "2014-08-15T12:00:26Z",
      "side": 1,
      "message": "True, but if we defer checking watchlist to a job, we can\u0027t know if \"current user\" should be subscribed (when he starts new topic on a page he watches)\n\nIf we move all of this to a job, it\u0027s likely to be executed after the new post was re-rendered and to him it\u0027ll look like he\u0027s not subscribed to the topic (until that job is run)\n\nUnless I\u0027m missing something - are watchlisted titles for $wgUser already fetched anyway?",
      "parentUuid": "8e28a382_6de78ea8",
      "revId": "70841c737966514c4b7131f8da0c8c7d90b5f82c",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8e28a382_57f57bc6",
        "filename": "includes/Data/WatchTopicListener.php",
        "patchSetId": 7
      },
      "lineNbr": 58,
      "author": {
        "id": 776
      },
      "writtenOn": "2014-08-15T20:25:44Z",
      "side": 1,
      "message": "What i was thinking is that something like this seems simpler and more straight forward: https://gist.github.com/ebernhardson/221b53d9f31cadc6ea24",
      "parentUuid": "8e28a382_261763f5",
      "revId": "70841c737966514c4b7131f8da0c8c7d90b5f82c",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8e28a382_0d3a3133",
        "filename": "includes/Data/WatchTopicListener.php",
        "patchSetId": 7
      },
      "lineNbr": 58,
      "author": {
        "id": 214
      },
      "writtenOn": "2014-08-18T18:56:50Z",
      "side": 1,
      "message": "That still won\u0027t make \"subscribe current user if he watchlists this page\" any faster. Although that one can be subscribed anyway.\n\nI originally also considered making separate listeners, but didn\u0027t really like it too much - I don\u0027t want to create too much handlers for similar stuff; I\u0027d rather have them \"configurable\" somewhere.\n\nI\u0027m about to submit soething new with 2 listeners \"delayed\" \u0026 \"immediate\" - let me know what you think ;)",
      "parentUuid": "8e28a382_57f57bc6",
      "revId": "70841c737966514c4b7131f8da0c8c7d90b5f82c",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951",
      "unresolved": false
    }
  ]
}