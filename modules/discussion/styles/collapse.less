@import 'mediawiki.mixins.less';

.collapseButtonIcon(@icon-prefix; @dir: '') {
	.background-image-svg( ~"@{icon-prefix}_normal@{dir}.svg", ~"@{icon-prefix}_normal@{dir}.png" );

	&.active {
		.background-image-svg( ~"@{icon-prefix}_selected@{dir}.svg", ~"@{icon-prefix}_selected@{dir}.png" );
	}

	background-position: left 16px center !important;
	background-size: 14px auto !important;
	background-repeat: no-repeat !important;
}

.topic-collapser {
	margin: 0 !important;

	li {
		float: right;
		text-indent: -9999px;
		width: 30px;
		list-style: none;
		cursor: pointer;

		&:first-child {
			margin-right: 6px;
		}
	}

	.topic-one-line {
		.collapseButtonIcon( '../../base/images/toggle_one_line' );
	}

	.topic-collapsed {
		.collapseButtonIcon( '../../base/images/toggle_collapsed' );
	}

	.topic-complete {
		.collapseButtonIcon( '../../base/images/toggle_complete'; '_ltr' );
	}
}

.flow-container {
	.flow-topic-posts-meta-minimal {
		display: none;
		margin: 0;
	}

	&.topic-collapsed-one-line .flow-topic-closed {
		.flow-titlebar {
			height: 30px;
		}
		.flow-topic-title {
			overflow: hidden;
			white-space: nowrap;
			padding: 0;

			.flow-realtitle {
				text-overflow: ellipsis;
			}
		}


		.flow-topic-posts-meta,
		.flow-datestamp {
			display: none;
		}

		.flow-topic-posts-meta-minimal {
			display: block;

			// position in upper right hand corner
			position: absolute;
			right: 22px;
			top: 15px;

			font-weight: bold;
			color: #FFF;
			background-color: #CCC;

			// title height = 30px; this only 22, so add 4px margin bottom & top
			line-height: 22px;
			height: 22px;
			margin: 4px 0;
			padding: 0 10px;

			// this creates the small bottom-right arrow
			&:after {
				// :after should have some content in order to show up
				content: '.';
				text-indent: -9999px;
				display: block;

				width: 0;
				height: 0;
				border-top: 5px solid transparent;
				border-left: 5px solid #CCC;

				position: relative;
				bottom: 5px; // "icon" height - arrow height
				// calc's are LESS-escaped below because I want CSS to do the
				// calc, not LESS (which incorrectly returns 110%)
				left: calc(~"100% + 10px"); // "icon" width + "icon" padding-right
			}
		}
	}
}
